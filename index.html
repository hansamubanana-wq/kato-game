<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>åŠ è—¤å…ˆç”Ÿã®æˆæ¥­ã§å¯ã‚ï¼</title>
    <style>
        body { font-family: sans-serif; text-align: center; background-color: #f0f0f0; }
        #game-area { margin-top: 50px; font-size: 24px; font-weight: bold; }
        #status { font-size: 100px; margin: 20px; }
        #score { font-size: 20px; color: #333; }
        .sleeping { color: blue; }
        .awake { color: green; }
        .danger { color: red; }
    </style>
</head>
<body>
    <h1>åŠ è—¤å…ˆç”Ÿã«è¦‹ã¤ã‹ã‚‰ãšã«å¯ã‚ï¼</h1>
    <p>ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã„ã‚‹é–“ã ã‘å¯ã‚‰ã‚Œã¾ã™ã€‚<br>å…ˆç”ŸãŒã“ã£ã¡ã‚’è¦‹ãŸã‚‰ã‚­ãƒ¼ã‚’é›¢ã—ã¦èµ·ãã‚ï¼</p>
    
    <div id="game-area">
        <div id="teacher-status">åŠ è—¤å…ˆç”Ÿï¼šé»’æ¿ã‚’æ›¸ã„ã¦ã„ã‚‹...</div>
        <div id="status">ğŸ˜ èµ·ãã¦ã„ã‚‹</div>
        <div id="score">ç¡çœ æ™‚é–“: 0ç§’</div>
    </div>

    <script>
        const statusEl = document.getElementById("status");
        const teacherEl = document.getElementById("teacher-status");
        const scoreEl = document.getElementById("score");
        
        let isSleeping = false;
        let isTeacherLooking = false;
        let score = 0;
        let gameOver = false;

        // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨å¯ã‚‹
        document.addEventListener("keydown", (e) => {
            if (e.code === "Space" && !gameOver) {
                isSleeping = true;
                statusEl.textContent = "ğŸ˜´ ç¡çœ ä¸­...";
                statusEl.className = "sleeping";
            }
        });

        // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã‚’é›¢ã™ã¨èµ·ãã‚‹
        document.addEventListener("keyup", (e) => {
            if (e.code === "Space") {
                isSleeping = false;
                statusEl.textContent = "ğŸ˜ èµ·ãã¦ã„ã‚‹";
                statusEl.className = "awake";
            }
        });

        // ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ï¼ˆç¡çœ æ™‚é–“ã‚’è¨ˆæ¸¬ï¼‰
        setInterval(() => {
            if (gameOver) return;

            if (isSleeping) {
                score += 1;
                scoreEl.textContent = "ç¡çœ æ™‚é–“: " + (score / 10).toFixed(1) + "ç§’";
            }
            
            // å…ˆç”ŸãŒè¦‹ã¦ã„ã‚‹ã®ã«å¯ã¦ã„ãŸã‚‰ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
            if (isTeacherLooking && isSleeping) {
                gameOver = true;
                statusEl.textContent = "ğŸ˜± ãƒãƒ¬ãŸï¼ï¼";
                teacherEl.textContent = "åŠ è—¤å…ˆç”Ÿï¼šã€Œã‚³ãƒ©ï¼å¯ã‚‹ãªï¼ã€";
                teacherEl.className = "danger";
                alert("åŠ è—¤å…ˆç”Ÿã«è¦‹ã¤ã‹ã‚Šã¾ã—ãŸ... è¨˜éŒ²: " + (score / 10).toFixed(1) + "ç§’");
                location.reload(); // ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦å†é–‹
            }
        }, 100);

        // åŠ è—¤å…ˆç”Ÿã®å‹•ãï¼ˆãƒ©ãƒ³ãƒ€ãƒ ï¼‰
        function teacherLoop() {
            if (gameOver) return;
            
            // ãƒ©ãƒ³ãƒ€ãƒ ãªæ™‚é–“ã§æŒ¯ã‚Šè¿”ã‚‹
            const waitTime = Math.random() * 3000 + 2000; // 2ã€œ5ç§’

            setTimeout(() => {
                isTeacherLooking = true;
                teacherEl.textContent = "âš ï¸ åŠ è—¤å…ˆç”ŸãŒè¦‹ã¦ã„ã‚‹ï¼";
                teacherEl.className = "danger";

                // 1ã€œ2ç§’è¦‹ã¤ã‚ã‚‹
                setTimeout(() => {
                    isTeacherLooking = false;
                    teacherEl.textContent = "åŠ è—¤å…ˆç”Ÿï¼šé»’æ¿ã‚’æ›¸ã„ã¦ã„ã‚‹...";
                    teacherEl.className = "";
                    teacherLoop(); // æ¬¡ã®ãƒ«ãƒ¼ãƒ—ã¸
                }, Math.random() * 1000 + 1000);

            }, waitTime);
        }

        teacherLoop(); // é–‹å§‹
    </script>
</body>
</html>